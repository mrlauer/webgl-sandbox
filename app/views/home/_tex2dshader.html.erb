<% if (defined? is3d) and is3d %>
    <% texcoord = 'vec3' %>
    <% sampler = 'sampler3D' %>
    <% texturefn = 'texture3D' %>
<% else %>
    <% texcoord = 'vec2' %>
    <% sampler = 'sampler2D' %>
    <% texturefn = 'texture2D' %>
<% end %>
<% if not defined? shaderName %>
    <% shaderName = "shader-fs" %>
<% end %>
<script id="<%= shaderName %>" type="x-shader/x-fragment">
    #ifdef GL_ES
    precision highp float;
    #endif

    varying vec4 vPosition;
    varying <%= texcoord %> vUV;
    uniform <%= sampler %> uTexture;

    uniform int uMaxLimit;
    uniform float uMax;
    uniform float uMin;
 
    void main(void) {
        float alpha = 1.0;
        vec3 light = <%= texturefn %>(uTexture, vUV).rbg;

        vec3 minrange = vec3(uMin, uMin, uMin);
        vec3 maxrange = vec3(uMax, uMax, uMax);
        vec3 fac = maxrange - minrange;
        light = (light - minrange) / fac;
 
        gl_FragColor = vec4(light, alpha);
    }
</script>

